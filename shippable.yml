build_image: shippableimages/ubuntu1404_nodejs

cache: true

archive: true

language: node_js

node_js:
  - "0.10"

install:
  - sudo apt-get update
  - sudo apt-get -y install mono-complete xsltproc
  - mozroots --import --sync
  - curl -LO http://nuget.org/nuget.exe

before_script:
  - mkdir -p shippable/testresults

script:
  - mono --version
  - mono nuget.exe restore
  - xbuild TestNuGetAndShippable.sln
  - cp TestNuGetAndShippable/bin/Debug/TestNuGetAndShippable.exe shippable
  - mono "$(ls -d packages/NUnit.Runners.* | tail -n 1)/tools/nunit-console.exe" tests/bin/Debug/tests.dll

after_script:
  - xsltproc nunit-to-junit.xsl TestResult.xml > shippable/testresults/TestResult.xml
